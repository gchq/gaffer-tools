<!--
  ~ Copyright 2017-2018 Crown Copyright
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<div layout="row" layout-padding flex>
    <md-card flex>
        <form name="ctrl.queryForm">
            <div layout="row">
                <div layout="column" flex="45"> <!-- left column -->
                    <operation-selector model="ctrl.selectedOperationModel"></operation-selector>
                    <input-manager primary-input="ctrl.getSelectedOp().input" secondary-input="ctrl.getSelectedOp().inputB"></input-manager>
                </div>
                <div layout="column" flex="55"> <!-- right column -->
                    <date-range ng-if="ctrl.timeConfig && ctrl.getSelectedOp().view" conf="ctrl.timeConfig"></date-range>
                    <parameter-form ng-if="ctrl.getSelectedOp().parameters" title-class="layout-padding section-title" parameters="ctrl.getSelectedOp().parameters"></parameter-form>
                    <view-builder ng-show="ctrl.getSelectedOp().view"></view-builder>
                    <directionality-picker ng-show="ctrl.getSelectedOp().inOutFlag"></directionality-picker>
                    <options-form ng-show="ctrl.hasOpOptions()"></options-form>
                </div>
            </div>
        </form>
        <md-card-actions layout="row" layout-align="end center">
            <md-button ng-click="ctrl.resetQuery()" id="reset-query">reset query</md-button>
            <md-button ng-click="ctrl.addToOperationChain()" id="add-to-op-chain" ng-disabled="!ctrl.canExecute()" ng-hide="ctrl.isEditing()">Add to Operation Chain</md-button>
            <md-button ng-click="ctrl.execute()" id="Execute Query" ng-disabled="!ctrl.canExecute()" class="md-primary">Execute operation</md-button>
        </md-card-actions>
    </md-card>
    <!-- <operation-chain flex="20" ng-if="ctrl.getChain().length > 0" operations="ctrl.getChain()" on-click="ctrl.editOperation(id)" on-delete="ctrl.deleteOperation(id)" on-create="ctrl.createNewOperation()" on-execute="ctrl.executeOperationChain()"></operation-chain> -->
        
</div>
