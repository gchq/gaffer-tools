<form name="ctrl.operationChainForm">
    <div ng-repeat="operation in ctrl.operations" class="operation">
        <operation model="operation" index="$index" time-config="ctrl.timeConfig" on-delete="ctrl.deleteOperation(index)" on-reset="ctrl.resetOperation(index)" on-execute="ctrl.execute(op)" chain-length="ctrl.operations.length"></operation>
        <div layout="row" layout-align="center" ng-if="ctrl.isNotLast($index)">
            <md-icon md-svg-icon="arrow-downward"></md-icon>
        </div>
    </div>
</form>
<div layout="row" layout-align="center">
    <md-button class="md-fab md-mini overlapping-fab" ng-click="ctrl.addOperation()">
        <md-icon md-svg-icon="add"></md-icon>
        <md-tooltip>Add a new operation to the chain</md-tooltip>
    </md-button>
</div>
<div layout="row" layout-align="space-between">
    <div>
        <md-button ng-click="ctrl.resetChain($event)">Reset operation chain</md-button>
    </div>
    <div>
        <md-button ng-disabled="!ctrl.canExecute()" id="save-chain" ng-click="ctrl.toggleSideNav()">Save operation chain</md-button>
        <md-button class="md-primary md-raised" ng-disabled="!ctrl.canExecute()" id="execute-chain" ng-click="ctrl.executeChain()">Execute operation chain</md-button>
    </div> 
</div>
<div layout="vertical">
    <md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-component-id="right" flex>
        <md-toolbar class="md-theme-light">
            <h1 class="md-toolbar-tools">Save Operation Chain</h1>
        </md-toolbar>
        <md-content layout-padding>
            <form flex>
                <div width='100%'>
                    <md-input-container class="md-block">
                        <label for="saved-name">Name</label>
                        <input type="text" id="saved-name" ng-model="ctrl.namedOperationName" md-autofocus>
                    </md-input-container>     
                </div>
                <div width='100%'>
                    <md-input-container class="md-block">
                        <label for="saved-description" required>Description</label>
                        <textarea 
                            id="saved-description"
                            md-no-autogrow
                            ng-model="ctrl.namedOperationDescription"
                            rows="3"
                        >
                        </textarea>
                    </md-input-container>
                </div>
                <div layout="row" class="content">
                    <md-input-container class="md-block">
                        <md-button id="save-named-operation" ng-click="ctrl.saveChain()" class="md-primary">Save</md-button>
                        <md-button id="close-save-sidenav" ng-click="ctrl.toggleSideNav()" class="md-primary">Close</md-button>
                    </md-input-container>
                </div>
            </form>
        </md-content>
    </md-sidenav>
</div>
